def getGitHash = { ->
  def stdout = new ByteArrayOutputStream()
  exec {
    commandLine "git", "rev-parse", "HEAD"
    standardOutput = stdout
  }
  return stdout.toString().trim()
}

android {
  defaultConfig {
    buildConfigField "String", "GIT_COMMIT", "\"${getGitHash()}\""
  }
}

dependencies {
  api project(":simplified-accounts-database")
  api project(":simplified-accounts-database-api")
  api project(":simplified-accounts-json")
  api project(":simplified-accounts-registry")
  api project(":simplified-accounts-registry-api")
  api project(":simplified-accounts-source-resolution")
  api project(":simplified-accounts-source-spi")
  api project(":simplified-adobe-extensions")
  api project(":simplified-analytics-api")
  api project(":simplified-books-controller")
  api project(":simplified-books-controller-api")
  api project(":simplified-boot-api")
  api project(":simplified-bugsnag")
  api project(":simplified-buildconfig-api")
  api project(":simplified-clock")
  api project(":simplified-documents")
  api project(":simplified-downloader-core")
  api project(":simplified-files")
  api project(":simplified-networkconnectivity")
  api project(":simplified-networkconnectivity-api")
  api project(":simplified-notifications")
  api project(":simplified-opds-auth-document")
  api project(":simplified-opds-auth-document-api")
  api project(":simplified-patron")
  api project(":simplified-patron-api")
  api project(":simplified-profiles")
  api project(":simplified-profiles-api")
  api project(":simplified-profiles-controller-api")
  api project(":simplified-reader-bookmarks")
  api project(":simplified-reader-bookmarks-api")
  api project(":simplified-services-api")
  api project(":simplified-threads")
  api project(":simplified-ui-branding")
  api project(":simplified-ui-images")
  api project(":simplified-ui-navigation-api")
  api project(":simplified-ui-navigation-tabs")
  api project(":simplified-ui-profiles")
  api project(":simplified-ui-screen")
  api project(":simplified-ui-splash")
  api project(":simplified-ui-thread-api")
  api project(":simplified-viewer-api")
  api project(":simplified-viewer-audiobook")
  api project(":simplified-viewer-epub-readium1")
  api project(":simplified-viewer-epub-readium2")
  api project(":simplified-viewer-pdf")
  api project(":simplified-viewer-spi")

  api libraries.androidAsync
  api libraries.androidXAppCompat
  api libraries.androidXMultidex
  api libraries.bugsnag
  api libraries.kotlinStdlib
  api libraries.slf4j

  api libraries.logbackAndroidCore
  api(libraries.logbackAndroidClassic) {
    // https://github.com/tony19/logback-android/issues/73
    exclude group: "com.google.android", module: "android"
  }
}
