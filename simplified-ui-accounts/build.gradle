apply plugin: 'kotlin-kapt'

android {
  buildFeatures {
    dataBinding true
  }

  defaultConfig {
    testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    testInstrumentationRunnerArgument("runnerBuilder", "de.mannodermaus.junit5.AndroidJUnit5Builder")
  }

  testOptions {
    unitTests {
      includeAndroidResources = true
    }
  }
}

dependencies {
  implementation project(":simplified-android-ktx")
  implementation project(":simplified-buildconfig-api")
  implementation project(":simplified-cardcreator")
  implementation project(":simplified-documents")
  implementation project(":simplified-metrics-api")
  implementation project(":simplified-oauth")
  implementation project(":simplified-profiles-controller-api")
  implementation project(":simplified-reader-bookmarks-api")
  implementation project(":simplified-services-api")
  implementation project(":simplified-threads")
  implementation project(":simplified-ui-errorpage")
  implementation project(":simplified-ui-images")
  implementation project(":simplified-webview")
  implementation project(':simplified-ui-listeners-api')

  implementation libs.androidx.app.compat
  implementation libs.androidx.constraint.layout
  implementation libs.androidx.lifecycle
  implementation libs.androidx.fragment
  implementation libs.androidx.recycler.view
  implementation libs.google.material
  implementation libs.kotlin.stdlib
  implementation libs.kotlin.reflect
  implementation libs.nypl.theme
  implementation libs.rxjava2
  implementation libs.rxjava2.extensions
  implementation libs.rxandroid2
  implementation libs.slf4j

  //JUnit 4 + 5
  testImplementation libs.junit
  testImplementation libs.junit.jupiter.api
  testImplementation libs.junit.jupiter.engine
  testImplementation libs.junit.vintage.engine

  // Fragment/Activity Testing in JVM
  testImplementation libs.robolectric

  // AndroidX Test
  testImplementation libs.androidx.test.core.ktx
  testImplementation libs.androidx.test.runner
  testImplementation libs.androidx.test.rules
  testImplementation libs.androidx.test.ext.junit.ktx

  // Mocking
  testImplementation libs.mockito.kotlin

  // Espresso
  testImplementation libs.androidx.test.espresso.core

  // Assertions
  testImplementation libs.kluent.android

  // Android Junit5 configuration
  testImplementation libs.junit5.android.test.core
  testRuntimeOnly libs.junit5.android.test.runner
  testRuntimeOnly libs.androidx.test.runner

  // Required at this location by 'android-test-runner' regardless of usage
  androidTestRuntimeOnly libs.junit5.android.test.runner

  // Temporary workaround to force databinding codegen in Robolectric tests
  // https://github.com/robolectric/robolectric/issues/3789
  kaptTest libs.androidx.databinding.kapt
}
